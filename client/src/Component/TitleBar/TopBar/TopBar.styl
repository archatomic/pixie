.TopBar
    display flex
    padding rhythm--quarter
    align-items flex-start

    &-spacer
        flex-grow 1

    &-control
        interactive()
        padding rhythm--half
        border-radius 0.3rem

    &-home
        margin-right rhythm--quarter

    &-menu
        margin-left rhythm--quarter

    &-right
        display flex
        align-items center
        margin-left rhythm--quarter

    &-tabs
        display flex
        flex-shrink 1
        overflow auto

    &-tab
        position relative
        color grey(70)
        display flex
        align-items center
        border-radius 0.3rem
        margin-right rhythm--quarter

        &--dirty
            font-style italic

        // &:not(&:has(&-label--active))
        //     & + &:before
        //         content ''
        //         background grey(87)
        //         width 0.1rem
        //         height 2rem
        //         position absolute
        //         right 100%
        //         top 50%
        //         transform translate(- rhythm--quarter / 2, -50%)

    &-tab:has(&-tab-label--active),
    &-home--active &-control,
    &-control--active
        background theme.panel
        color theme.black

    &-tab-label
        padding rhythm--half rhythm--half rhythm--half rhythm
        line-height 1
        max-width 13rem
        white-space nowrap
        overflow hidden
        text-overflow ellipsis

    &-close-tab
        position relative
        z-index 0
        font-size fs--small
        color grey(70)
        cursor pointer

        &:hover
            color grey(30)

        &:active
            color grey(0)
            transition none

    &-tab--dirty &-close-tab
        &::before
            content ''
            position absolute
            width 1em
            height 1em
            border-radius 1em
            background currentColor
            z-index -1

        &:hover::before
            display none
